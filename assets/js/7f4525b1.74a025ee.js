"use strict";(self.webpackChunkpromptgineering=self.webpackChunkpromptgineering||[]).push([[1631],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=s(n),c=o,k=u["".concat(i,".").concat(c)]||u[c]||m[c]||r;return n?a.createElement(k,l(l({ref:t},d),{},{components:n})):a.createElement(k,l({ref:t},d))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[u]="string"==typeof e?e:o,l[1]=p;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3359:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(87462),o=(n(67294),n(3905));const r=n.p+"assets/images/pal-102def844edd97ac78e9c26cbc2564f9.png",l={sidebar_position:4},p="\ud83d\udfe1 K\xf3d jako zd\u016fvodn\u011bn\xed",i={unversionedId:"advanced_applications/pal",id:"advanced_applications/pal",title:"\ud83d\udfe1 K\xf3d jako zd\u016fvodn\u011bn\xed",description:"Dal\u0161\xedm p\u0159\xedkladem syst\xe9mu MRKL jsou Program-aided Language Models (PAL)(@gao2022pal).",source:"@site/docs/advanced_applications/pal.md",sourceDirName:"advanced_applications",slug:"/advanced_applications/pal",permalink:"/docs/advanced_applications/pal",draft:!1,editUrl:"https://github.com/trigaten/promptgineering/tree/v1.2.3/docs/advanced_applications/pal.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udfe1 LLM, kter\xe9 uva\u017euj\xed (React) a jednaj\xed (Act)",permalink:"/docs/advanced_applications/react"},next:{title:"\u2696\ufe0f Spolehlivost",permalink:"/docs/category/\ufe0f-spolehlivost"}},s={},d=[{value:"P\u0159\xedklad",id:"p\u0159\xedklad",level:2},{value:"V\xedce",id:"v\xedce",level:2}],u={toc:d},m="wrapper";function c(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"-k\xf3d-jako-zd\u016fvodn\u011bn\xed"},"\ud83d\udfe1 K\xf3d jako zd\u016fvodn\u011bn\xed"),(0,o.kt)("p",null,"Dal\u0161\xedm p\u0159\xedkladem syst\xe9mu MRKL jsou ",(0,o.kt)("a",{parentName:"p",href:"https://reasonwithpal.com"},"Program-aided Language Models (PAL)"),(0,o.kt)("sup",{parentName:"p",id:"fnref-1"},(0,o.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),".\nKdy\u017e je jim zad\xe1na ot\xe1zka, PAL jsou schopny ",(0,o.kt)("strong",{parentName:"p"},"napsat k\xf3d"),", kter\xfd tuto ot\xe1zku vy\u0159e\u0161\xed. Odes\xedlaj\xed\nk\xf3d do programov\xe9ho b\u011bhu, aby z\xedskal v\xfdsledek. PAL pracuje na rozd\xedl od CoT; PAL je meziproduktem\nuva\u017eov\xe1n\xed je k\xf3d, zat\xedmco u CoT je to p\u0159irozen\xfd jazyk."),(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:r,style:{width:"500px"}})),(0,o.kt)("div",{style:{textAlign:"center"}},"P\u0159\xedklad PAL (Gao a kol.)"),(0,o.kt)("p",null,"Je t\u0159eba si uv\u011bdomit jednu d\u016fle\u017eitou v\u011bc: PAL ve skute\u010dnosti prol\xedn\xe1 p\u0159irozen\xfd jazyk (NL) a k\xf3d.\nNa v\xfd\u0161e uveden\xe9m obr\xe1zku jsou mod\u0159e vyzna\u010deny \xfavahy v p\u0159irozen\xe9m jazyce, kter\xe9 PAL generuje. A\u010dkoli se jedn\xe1 o\nnen\xed na obr\xe1zku zobrazen, PAL ve skute\u010dnosti generuje '","#","' p\u0159ed ka\u017ed\xfdm \u0159\xe1dkem \xfavahy NL, tak\u017ee\naby je programov\xfd b\u011bh interpretoval jako koment\xe1\u0159e."),(0,o.kt)("h2",{id:"p\u0159\xedklad"},"P\u0159\xedklad"),(0,o.kt)("p",null,"Pod\xedvejme se na p\u0159\xedklad, jak PAL \u0159e\u0161\xed matematickou ot\xe1zku. Pou\u017e\xedv\xe1m v\xfdzvu se t\u0159emi sn\xedmky,\nkter\xe1 je zjednodu\u0161enou verz\xed ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reasoning-machines/pal/blob/main/pal/prompt/math_prompts.py"},"t\xe9to"),(0,o.kt)("sup",{parentName:"p",id:"fnref-1"},(0,o.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),". "),(0,o.kt)("p",null,"Pou\u017eiji k tomu langchain, bal\xed\u010dek jazyka Python pro \u0159et\u011bzen\xed funkc\xed LLM. Nejprve je pot\u0159eba prov\xe9st n\u011bkolik instalac\xed:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'!pip install langchain==0.0.26\n!pip install openai\nfrom langchain.llms import OpenAI\nimport os\nos.environ["OPENAI_API_KEY"] = "sk-YOUR_KEY_HERE"\n')),(0,o.kt)("p",null,"Pot\xe9 m\u016f\u017eeme vytvo\u0159it instanci GPT-3 davinci-002 (vol\xe1n\xed API se uskute\u010dn\xed, kdy\u017e pou\u017eijeme tento objekt)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"llm = OpenAI(model_name='text-davinci-002', temperature=0)\n")),(0,o.kt)("p",null,"Zde je few shot prompt:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'MATH_PROMPT = \'\'\'\nQ: V serverovn\u011b bylo dev\u011bt po\u010d\xedta\u010d\u016f. Ka\u017ed\xfd den od pond\u011bl\xed do \u010dtvrtka bylo instalov\xe1no dal\u0161\xedch p\u011bt po\u010d\xedta\u010d\u016f. Kolik po\u010d\xedta\u010d\u016f je nyn\xed v serverovn\u011b?\n\n# \u0159e\u0161en\xed v jazyce Python:\n"""V serverovn\u011b bylo dev\u011bt po\u010d\xedta\u010d\u016f. Ka\u017ed\xfd den, od pond\u011bl\xed do \u010dtvrtka, bylo nainstalov\xe1no dal\u0161\xedch p\u011bt po\u010d\xedta\u010d\u016f. Kolik po\u010d\xedta\u010d\u016f je nyn\xed v serverovn\u011b?"""\ncomputers_initial = 9\nomputers_per_day = 5\nnum_days = 4 # 4 dny od pond\u011bl\xed do \u010dtvrtka\ncomputers_added = computers_per_day * num_days\ncomputers_total = computers_initial + computers_added\nresult = computers_total\nreturn result\n\n\nOt\xe1zka: Shawn m\xe1 p\u011bt hra\u010dek. K V\xe1noc\u016fm dostal od maminky a tat\xednka po dvou hra\u010dk\xe1ch. Kolik hra\u010dek m\xe1 nyn\xed?\n\n# \u0159e\u0161en\xed v Pythonu:\n"""Shawn m\xe1 p\u011bt hra\u010dek. K V\xe1noc\u016fm dostal od maminky a tat\xednka po dvou hra\u010dk\xe1ch. Kolik hra\u010dek m\xe1 nyn\xed?"""\ntoys_initial = 5\nmom_toys = 2\ndad_toys = 2\ntotal_received = mom_toys + dad_toys\ntotal_toys = toys_initial + total_received\nresult = total_toys\n\n\nOt\xe1zka: Jason m\u011bl 20 l\xedz\xe1tek. Dal Dennymu n\u011bkolik l\xedz\xe1tek. Nyn\xed m\xe1 Jason 12 l\xedz\xe1tek. Kolik l\xedz\xe1tek dal Jason Dennymu?\n\n# \u0159e\u0161en\xed v Pythonu:\n"""Jason m\u011bl 20 l\xedz\xe1tek. Dal Dennymu n\u011bkolik l\xedz\xe1tek. Nyn\xed m\xe1 Jason 12 l\xedz\xe1tek. Kolik l\xedz\xe1tek dal Jason Dennymu?"""\njason_lollipops_initial = 20\njason_lollipops_after = 12\ndenny_lollipops = jason_lollipops_initial - jason_lollipops_after\nresult = denny_lollipops\n\nOt\xe1zka: {ot\xe1zka}\n\n# \u0159e\u0161en\xed v Pythonu:\n\'\'\'\n')),(0,o.kt)("p",null,"Nyn\xed m\u016f\u017eeme kombinovan\xfd dotaz p\u0159edat GPT-3."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"llm_out = llm(MATH_PROMPT.format(question=question))\nprint(llm_out)\n")),(0,o.kt)("p",null,"V\xfdstup je n\xe1sleduj\xedc\xed:"),(0,o.kt)("pre",null,(0,o.kt)("span",{className:"bluegreen-highlight"},"Emma let\u011bla 60 minut letadlem do Seattlu. Pot\xe9 jela 2 hodiny vlakem do Portlandu a n\xe1sledn\u011b 30 minut autobusem do Vancouveru. Jak dlouho j\xed trvala cesta do vancouveru?",(0,o.kt)("br",null),(0,o.kt)("br",null),"? plane_ride = 60",(0,o.kt)("br",null),"train_ride = 2 * 60  # 2 hodiny v minut\xe1ch",(0,o.kt)("br",null),"bus_ride = 30",(0,o.kt)("br",null),"total_time = plane_ride + train_ride + bus_ride",(0,o.kt)("br",null),"result = total_time")),(0,o.kt)("p",null,"Nakonec m\u016f\u017eeme tento k\xf3d p\u0159edat Python runtime a z\xedskat odpov\u011b\u010f:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"exec(llm_out)\nprint(result)\n")),(0,o.kt)("p",null,"V\xfdsledek je ",(0,o.kt)("strong",{parentName:"p"},"210"),", co\u017e je spr\xe1vn\u011b."),(0,o.kt)("p",null,"Viz z\xe1pisn\xedk Jupyter pro tento p\u0159\xedklad ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/trigaten/Learn_Prompting/tree/main/docs/code_examples/PAL.ipynb"},"zde"),"."),(0,o.kt)("h2",{id:"v\xedce"},"V\xedce"),(0,o.kt)("p",null,"Pod\xedvejte se tak\xe9 na p\u0159\xedklad ",(0,o.kt)("a",{parentName:"p",href:"https://colab.research.google.com/drive/1u4_RsdI0E79PCMDdcPiJUzYhdnjoXeXc?usp=sharing#scrollTo=Ba0ycacK4i1V"},"PAL's colab example"),"."),(0,o.kt)("div",{className:"footnotes"},(0,o.kt)("hr",{parentName:"div"}),(0,o.kt)("ol",{parentName:"div"},(0,o.kt)("li",{parentName:"ol",id:"fn-1"},"Gao, L., Madaan, A., Zhou, S., Alon, U., Liu, P., Yang, Y., Callan, J., & Neubig, G. (2022). PAL: Program-aided Language Models.\n",(0,o.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}c.isMDXComponent=!0}}]);